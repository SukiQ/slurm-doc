# CPU亲和性



CPU的亲和性， 就是**进程**要在指定的 CPU 上尽量长时间地运行而不被迁移到其他处理器，也称为CPU关联性

- 软亲和性：进程要在指定的 CPU 上尽量长时间地运行而不被迁移到其他CPU，Linux 内核进程调度器天生就具有被称为 软 CPU 亲和性（affinity） 的特性，因此linux通过这种软的亲和性试图使某进程尽可能在同一个CPU上运行

- 硬亲和性：将进程或者线程绑定到某一个指定的cpu核运行，虽然Linux尽力通过一种软的亲和性试图使进程尽量在同一个处理器上运行，但它也允许用户强制指定进程无论如何都必须在指定的处理器上运行

<warning>使用硬亲和性一般在需要保持高CPU缓存命中率时、需要测试复杂的应用程序时</warning>

Slurm提供了完整的CPU亲和性控制机制，允许管理员和用户在作业级别精细控制任务与CPU核心的绑定方式，需要开启配置支持（slurm.conf）

```bash
# 启用CPU亲和性支持
TaskPlugin=task/affinity
```

